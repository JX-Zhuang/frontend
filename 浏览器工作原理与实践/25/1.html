<html>

<body>
    <div id="mian_div">
        <li id="time_li">time</li>
        <li>geekbang</li>
    </div>

    <p id="demo">强制布局demo</p>
    <button onclick="foo()">添加新元素</button>

    <script>
        function foo() {
            let main_div = document.getElementById("mian_div")
            let new_node = document.createElement("li")
            let textnode = document.createTextNode("time.geekbang")
            new_node.appendChild(textnode);
            document.getElementById("mian_div").appendChild(new_node);
        }

        function foo() {
            let main_div = document.getElementById("mian_div")
            let new_node = document.createElement("li")
            let textnode = document.createTextNode("time.geekbang")
            new_node.appendChild(textnode);
            document.getElementById("mian_div").appendChild(new_node);
            //由于要获取到offsetHeight，
            //但是此时的offsetHeight还是老的数据，
            //所以需要立即执行布局操作
            console.log(main_div.offsetHeight)
        }

        function foo1() {
            let main_div = document.getElementById("mian_div")
            //为了避免强制同步布局，在修改DOM之前查询相关值
            console.log(main_div.offsetHeight)
            let new_node = document.createElement("li")
            let textnode = document.createTextNode("time.geekbang")
            new_node.appendChild(textnode);
            document.getElementById("mian_div").appendChild(new_node);

        }
    </script>
</body>

</html>